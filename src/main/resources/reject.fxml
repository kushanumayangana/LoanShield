<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.VBox?>

<ScrollPane fx:controller="com.controller.rejectController"
            xmlns="http://javafx.com/javafx/20"
            xmlns:fx="http://javafx.com/fxml/1"
            prefWidth="800" prefHeight="800"
            stylesheets="@/css/style.css"
            fitToWidth="true">

    <content>
        <VBox spacing="40" alignment="TOP_CENTER" styleClass="app-page-bg">
            <padding>
                <Insets top="40" right="40" bottom="40" left="40"/>
            </padding>
        
        <!-- Loan Rejection Report Section -->
            <VBox spacing="25" alignment="TOP_CENTER" styleClass="result-card">
                <padding>
                    <Insets top="30" right="30" bottom="30" left="30"/>
                </padding>

                <!-- Report Header with Logo -->
                <HBox spacing="20" alignment="CENTER_LEFT">
                    <HBox spacing="10" alignment="CENTER_LEFT">
                    
                        <VBox alignment="CENTER_LEFT" spacing="2">
                            <Label text="LoanShield" styleClass="logo"/>
                        </VBox>
                    </HBox>
                    <Region fx:id="spacer" HBox.hgrow="ALWAYS"/>
                    <VBox alignment="CENTER_RIGHT">
                        <Label text="Report ID: RPT-2024-0315-002"/>
                        <Label fx:id="generatedDateLabel" text="Generated: March 15, 2024"/>
                    </VBox>
                </HBox>
                
                <!-- Header bar decoration -->
                <Region styleClass="header-bar-rejected"/>

                <!-- Rejection Status -->
                <HBox spacing="15" alignment="CENTER_LEFT">
                    <Label text="✕" styleClass="rejected-title"/>
                    <VBox spacing="5">
                        <Label text="Application Not Approved" styleClass="rejected-title"/>
                        <Label text="Unfortunately, your loan application does not meet our current approval criteria."/>
                    </VBox>
                </HBox>

                <!-- Applicant Info -->
                <VBox spacing="10" alignment="TOP_LEFT">
                    <Label text="Applicant Information" styleClass="section-title"/>
                    <GridPane hgap="20" vgap="10">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="40"/>
                            <ColumnConstraints percentWidth="60"/>
                        </columnConstraints>

                        <Label text="Full Name:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <Label fx:id="fullNameLabel" text="Applicant Name" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                        <Label text="NIC Number:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        <Label fx:id="nicLabel" text="NIC Number" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                        <Label text="Application Date:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                        <Label fx:id="applicationDateLabel" text="Application Date" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                        <Label text="Loan Amount:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                        <Label fx:id="loanAmountLabel" text="Loan Amount" GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                        <Label text="Loan Purpose:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                        <Label text="General Loan" GridPane.rowIndex="4" GridPane.columnIndex="1"/>
                    </GridPane>
                </VBox>

                <!-- Risk Assessment Result -->
                <VBox spacing="10" alignment="CENTER">
                    <Label fx:id="riskScoreLabel" text="45" styleClass="risk-score-display"/>
                    <Label fx:id="riskProfileLabel" text="Poor Risk Profile" styleClass="risk-profile-poor"/>
                </VBox>

                <!-- Rejection Reasons -->
                <VBox spacing="15" styleClass="info-section">
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="ℹ" styleClass="info-title"/>
                        <Label text="Primary Rejection Factors" styleClass="info-title"/>
                    </HBox>
                    
                    <VBox spacing="8" fx:id="rejectionReasonsContainer">
                        <!-- Rejection reasons will be added dynamically -->
                    </VBox>
                </VBox>

                <!-- Signature -->
                <HBox spacing="20" alignment="CENTER_LEFT">
                    <VBox spacing="5">
                        <Label fx:id="footerDateLabel" text="Date: March 15, 2024"/>
                    </VBox>

                    <Region HBox.hgrow="ALWAYS"/>

                    <VBox alignment="CENTER" styleClass="rejected-badge">
                        <Label text="REJECTED"/>
                        <Label text="LoanShield"/>
                    </VBox>
                </HBox>

                <!-- Back and Save Buttons -->
                <HBox alignment="CENTER_LEFT" spacing="20">
                    <Button text="Back to Application" onAction="#handleBackButton" styleClass="submit-button"/>
                    <Button fx:id="saveButton" text="Save" onAction="#handleSaveButton" styleClass="save-button-danger"/>
                </HBox>
            </VBox>
        </VBox>
    </content>
</ScrollPane>
